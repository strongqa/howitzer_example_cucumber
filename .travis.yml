language: ruby
dist: trusty
sudo: required
addons:
  chrome: stable

rvm:
  - 2.4.0

install: bundle install --jobs=3 --retry=3 --with webkit

env:
  - SEXY_SETTINGS=driver=phantomjs
  - SEXY_SETTINGS=driver=poltergeist
  - SEXY_SETTINGS=driver=headless_chrome
  - SEXY_SETTINGS=driver=webkit
  - secure: "F3fMMbv1oIJuAggnw6pZ1//ihLIupBIES1FT2lXBJQBxv/+d9b4xnb1mHoCKSMn0zcqda64kEHZhiGqGAv1+J97iehjXghcxYntQRGIQShbB5wg4Skzg4jcYYfiw4j7HMW//InHp4tTUCxS6aKSBB1IVSHKRz9/t3KvyX+l4oFIiYR0czyPk2KOvCM72t3f1hjv2Zn+kf0tVoqbniXfow22LKpjMdwA2T/sHpv2uPdwq0irca3r5Yhkxgl9yDaMZnyh5F2as/Y2wbbnxUr0/N71R1sxohNIZJkyTz26Ua+8HBl4qFutYO7wCUE5IZCQ5xaRBPn6MckebIvMYmpSc5okFsoLyse0JKZDWzv2XOi8N8ZW5BbPA2JMUQNbNltWydQf9lrY+fN4EpaKcOHo2yyTQ3V4jTfjOVNPdAQtnB+1xt878+Al9tCh4Nyo0p4cyAUsE6CBFgdqb/dfXsQlXX0baoM1Ryhert2ExnYiNkEiBOfH6g6AkxkXv5upKKyooWIdJ38EB9spYseXMBvz73Anm4K/BkVRUHqPmp1A8KpzWQChKBIxH9KwlbZloysd8IBpaQVULiafs/NoSIDXnEqyjURHQk+W80BbgDJ+7vHvdmuAZHJ0YW9qEwtqf7lSVa6exANlkSm612KFPewms2DEfivnzGdpq3aUDzUqvEIM=" #driver=sauce
  - secure: "AqvOUC2lRlkviMJZG2hHiFj/gT7O2gdgC/7Xxg7hTQE5VWVFDmdlDWt67hTNwYK/9kVLicn+/BW1t+Pi9jwWpUG09trYTfXQAiR77284uBASlN6g0/DB8sgcK8aX6YvlODrXpyidXxNeH5ASiaEq5Jh/4eDfe41SQ+DimhFJE2DEGUt63/aVCZaDjXY+CYCBkcjkFX4t/SA+PG+YOHiDigCWm5HMeEcIWW1wDfOFuliEFxrrxciXldpl1iSQyWviRvIzSIZ0UzpjXRM1VojCBkQuz4PP16AYheJp9N5RaLyQhaketpprzlNxD+S/jYxQQGdiqy7Ua3hF+5jyKuxzGtbKDp5AAbU86Rz8qiQ2Wxe5X29K23PIadtK3sGm06R8hwI6LCBjn+6XCKSqyxIQCfTAzbNGmr4GaLWGYeolCfk3CwMtSYi+qfM+Sfa24fRXrWeOZXrhtvBcYLXzWnJhE1y2OwtQ849e29uEs4mAy6XskR1nOCRTQstOy680mGYwcptoHa91GG0+zQWDutzoTk3FQ+oOREgCayc9FL+Zoa2sGco8ZA5xG7ucehcMYYEHGlAQKm+JUiEn5fYhlaoKnc4UeFn8A3T1BYAQO4ok3WGrmvXOVhJkNE/djH8SqgZs6Iy3ggsUjsPEP7RN2+6PtPvSLNxb1iU04+sjL653RFk=" #driver=testingbot
  - secure: "g/tIRxriWjyTaHOU6ODPM/DNgWncjYN2C381K9rWMjyeoO7JZz9tPeHKgmD/5W1mdQ54oSsPMs9xNL6Idlfj2FmNO8ywAyWiQ9PRC1hu/llkLHcS+A8O26pFVsEYDLEiyseZkKYOKeKwNaTSK3jgmvASwu1Ew5ek04W4aV8C4dX9A8xqc3HUyHtJEo4hZVA+LV/JZY/uRHGJZUOQ0FALL4Dm6DrObmSM273VuEShvfPUG2vP1AOa1oL2q5WigjYt80pu56cwrdfrdAiXMqEK1FVlOi2rTv5BvtjbNtSBDA9o0qCyTDp5IaDpJ1nq7msdLoOM+rnlCanX0mIUKHKD5DftsagIN0HVftekQuIkX4/tHI6oTv6Japs6vlCxbQI6zA5juVa1IJW7yVIMpy08mHEAMx/VsBRmCq1YRmGKSvoM6wGwHmkrv14vqLPv4VkshmtPik8IklAOQfeAjle1vSiFoIaNYXXUlO2FzSCp1us1AlBJTbGepW1sbHvYmbgixg7d4uN1n9XSXCWb0yktpaycfgTfo9iy0i6CAkZrf/0hgFIFIPFH/2puomyGInqzogoviYKFhpgZGKGZ7A3ktu9o/PZD8WJgViLLsmwRbm18aHgU7BuAkYR0HCzUY7ZZWpRAJH+rGhQn8UV0sUStII6xPjwXKPxqDL/oqEGAIJ0=" #driver=browserstack
  - secure: "MZpdCCFbcqDfSSkck/OM7L+dH67XHt3HovzGtK+sZWLJtkL9PFkuyZjV+yLcWzTJC15uLbAlaA6wl2mhGld2aq4K0UwU4qHsJ0wqA+l62hHosAOsAvMWEWU+KR5oLYwWiURU031oY9Umr1IRaL5dx3qxrdi2tL/T8F1QEtTtn7i9uTYHUfTtRddbKhK4sdOWbX4s4N98zvHiOmVVDsQ+8Rvz7PC/Hdy3RsCR1Ql2Ew9bWYGYB646qeZ2C2hxYrB/qis7Rq8+iRJvL18qqzHeRgUfUzQjG0yud0e28lkxEyHlFXuWqHaz8St1oSvY/cpnPVpgq5Bhbu5i/NPjBnYCuwrznLov0L7VGfpXw+HW2Tgm17m+k0rNK7AibTI+6r8KTzQvnFjWORnPTrvWHPLnd4+ys8aEGwgtxA5WfMfcOjvkV2859tUKH/y255YGHJepgJfMQxIy4uTNyxhfo/dOAvkUieVp/hSEMixDMfPF4ZQanbBKvtjrQYbRmo29ev1aPvsg1L5/KMfnT1wwXUHul37NZOPqsFliGcPUjL5B6og+rYVzeEfNDK6N/vzf+PQXqBKpgmE52vTouRBbMsAzCPAZg+r6wgrELQ2N7rKzilG2vEvW7DUrU2V4hJ1w4sI+6Xg851iYYYgGiUO4ageexACHLs8BeN75fV9nlEq/HjA=" #driver=crossbrowsertesting

script: ./scripts/run-tests.sh
